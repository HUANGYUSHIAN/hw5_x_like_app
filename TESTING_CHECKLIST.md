# 測試檢查清單

## 1. 本地認證測試 (LOCAL_AUTH=true)

### ✅ 登入功能
- [ ] 訪問 http://localhost:3000 應該自動重定向到 `/auth/local`
- [ ] 輸入 User ID 和 Name 可以登入
- [ ] 登入後自動跳轉到首頁
- [ ] 如果用戶不存在，會自動創建

### ✅ 登出功能
- [ ] 點擊左側欄位底部的用戶頭像
- [ ] 選擇 "Logout"
- [ ] 應該重定向到 `/auth/local` 登入頁面
- [ ] 多個標籤頁測試：在標籤 A 登出，標籤 B 和 C 應該也自動登出或重定向

## 2. 發文功能測試

### ✅ 發文
- [ ] 點擊 "What's happening?" 按鈕打開發文編輯器
- [ ] 輸入內容（測試 280 字元限制）
- [ ] 測試 URL 計數（每個 URL 固定 23 字元）
- [ ] 測試 hashtag 和 mention（不計入字元數）
- [ ] 發文後應該出現在 Feed 最上方

### ✅ 編輯文章
- [ ] 在自己的文章右上角點擊編輯圖標
- [ ] 選擇 "Edit"
- [ ] 修改內容並保存
- [ ] 文章應該即時更新

### ✅ 刪除文章
- [ ] 在自己的文章右上角點擊編輯圖標
- [ ] 選擇 "Delete"
- [ ] 確認刪除
- [ ] 文章應該從 Feed 中消失

## 3. Pusher 即時更新測試

### ✅ 多用戶測試場景
1. **準備**：
   - 打開 3 個瀏覽器標籤/視窗
   - 標籤 A：登入為 userA
   - 標籤 B：登入為 userB
   - 標籤 C：登入為 userC

2. **Follow 測試**：
   - 在標籤 B 和 C 中，訪問 userA 的個人頁面
   - 點擊 "Follow" 按鈕
   - 確認 userA 的 follower count 增加

3. **發文即時更新測試**：
   - 在標籤 A 中發文
   - 標籤 B 和 C（如果 follow userA）應該**立即**看到新文章出現在 Feed 最上方
   - 不需要手動刷新頁面

4. **按讚即時更新測試**：
   - 在標籤 B 中對 userA 的文章按讚
   - 標籤 A 和 C 應該**立即**看到讚數增加
   - 標籤 B 的按讚按鈕應該變為紅色（已按讚狀態）

5. **留言即時更新測試**：
   - 在標籤 C 中對 userA 的文章留言
   - 標籤 A 和 B 應該**立即**看到留言數增加

6. **編輯即時更新測試**：
   - 在標籤 A 中編輯自己的文章
   - 標籤 B 和 C 應該**立即**看到文章內容更新

## 4. 左側功能欄位測試

### ✅ 側邊欄功能
- [ ] **Home**：點擊後跳轉到首頁 Feed
- [ ] **Profile**：點擊後跳轉到自己的個人頁面
- [ ] **Drafts**：點擊後跳轉到草稿列表頁面
- [ ] **收合/展開**：點擊左上角的按鈕可以收合/展開側邊欄
- [ ] **用戶資訊**：底部顯示當前登入用戶的頭像、姓名、userID
- [ ] **登出選單**：點擊用戶資訊區域可以打開登出選單

## 5. 個人頁面測試

### ✅ Profile 功能
- [ ] 訪問自己的個人頁面：`/{userId}`
- [ ] 顯示自己的所有文章
- [ ] 點擊 "Edit Profile" 可以編輯個人資料
- [ ] 訪問其他用戶的個人頁面
- [ ] 可以 Follow/Unfollow 其他用戶
- [ ] 顯示正確的 follower/following 數量

## 6. 其他功能測試

### ✅ 留言功能
- [ ] 點擊文章進入詳情頁
- [ ] 可以留言
- [ ] 留言應該即時更新到所有查看該文章的用戶

### ✅ 轉發功能
- [ ] 點擊轉發按鈕
- [ ] 轉發數應該增加
- [ ] 轉發的文章應該出現在 Feed 中

### ✅ 草稿功能
- [ ] 在發文編輯器中點擊 "Save Draft"
- [ ] 在草稿頁面可以看到保存的草稿
- [ ] 可以編輯草稿
- [ ] 可以刪除草稿
- [ ] 從草稿發文後，草稿應該被刪除

## 測試注意事項

1. **Pusher 配置**：
   - 如果 Pusher 未配置，應用程式仍應正常運行（只是沒有即時更新）
   - 檢查 console 是否有 Pusher 相關的警告

2. **多標籤頁測試**：
   - 確保每個標籤頁使用不同的用戶登入
   - 測試登出時，其他標籤頁的行為

3. **錯誤處理**：
   - 測試網路錯誤情況
   - 測試無效輸入
   - 確保錯誤不會導致應用程式崩潰

## 快速測試指令

```bash
# 啟動開發伺服器
npm run dev

# 在瀏覽器中打開
# http://localhost:3000

# 應該自動重定向到
# http://localhost:3000/auth/local
```

## 測試用戶

### 已創建的測試用戶

執行 `npm run create-users` 已創建以下測試用戶：

| User ID | Name | Email | 用途 |
|---------|------|-------|------|
| userA | User A | usera@test.com | 主要發文者 |
| userB | User B | userb@test.com | 追蹤者 1 |
| userC | User C | userc@test.com | 追蹤者 2 |
| testuser1 | Test User 1 | testuser1@test.com | 額外測試用戶 |
| testuser2 | Test User 2 | testuser2@test.com | 額外測試用戶 |

### 登入方式

1. 訪問 http://localhost:3000/auth/local
2. 輸入 **User ID** 和 **Name**（不需要密碼）
3. 點擊 "Login" 按鈕

**範例**：
- User ID: `userA`
- Name: `User A`

### 測試流程建議

1. **準備階段**：
   - 標籤 A：登入為 `userA` (User A)
   - 標籤 B：登入為 `userB` (User B)
   - 標籤 C：登入為 `userC` (User C)

2. **Follow 測試**：
   - 在標籤 B 和 C 中，訪問 userA 的個人頁面 (`/userA`)
   - 點擊 "Follow" 按鈕
   - 確認 userA 的 follower count 增加

3. **發文即時更新測試**：
   - 在標籤 A 中發文
   - 標籤 B 和 C 應該**立即**看到新文章出現在 Feed 最上方
   - 不需要手動刷新頁面

4. **按讚即時更新測試**：
   - 在標籤 B 中對 userA 的文章按讚
   - 標籤 A 和 C 應該**立即**看到讚數增加
   - 標籤 B 的按讚按鈕應該變為紅色（已按讚狀態）

5. **留言即時更新測試**：
   - 在標籤 C 中對 userA 的文章留言
   - 標籤 A 和 B 應該**立即**看到留言數增加

6. **編輯即時更新測試**：
   - 在標籤 A 中編輯自己的文章
   - 標籤 B 和 C 應該**立即**看到文章內容更新

### 重新創建測試用戶

如果需要重新創建測試用戶，執行：

```bash
npm run create-users
```

腳本會自動跳過已存在的用戶，只創建新的用戶。

